{% extends 'base.html' %}
{% block title %}{{ action }} Camera{% endblock %}
{% block content %}
<div style='max-width:600px; margin:40px auto;'>
  <h2 style='color:white; text-align:center; margin-bottom:20px;'>{{ action }} Camera</h2>
  <div class='card'>
    {% if error %}<div class='alert alert-error'>{{ error }}</div>{% endif %}
    <form method='POST' action='{% if camera %}/cameras/{{ camera.camera_id }}/edit{% else %}/cameras/new{% endif %}'>
      {% if not camera %}
      <div class='form-group'>
        <label>Camera ID *</label>
        <input type='text' name='camera_id' required placeholder='e.g. cam1, front_door'
               pattern='[a-zA-Z0-9_-]+'>
        <small style='color:#666;'>Must match the cameraId in your ESP32-CAM code</small>
      </div>
      {% endif %}
      <div class='form-group'>
        <label>Camera Name *</label>
        <input type='text' name='name' required value='{% if camera %}{{ camera.name }}{% endif %}'>
      </div>
      <div class='form-group'>
        <label>Location</label>
        <input type='text' name='location' value='{% if camera %}{{ camera.location }}{% endif %}'>
      </div>
      <div style='display:flex; gap:15px; margin-top:20px;'>
        <a href='/dashboard' class='btn btn-secondary' style='flex:1; text-align:center;'>Cancel</a>
        <button type='submit' class='btn' style='flex:1;'>{{ action }} Camera</button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
